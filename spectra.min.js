(function(){"use strict";var a=this,b=a.Spectra,c={};c.clamp=function(a,b,c){return b=void 0!==b?b:0,c=void 0!==c?c:1,Math.max(b,Math.min(c,a))},c.rgbToHsv=function(a){var b={},c=Number(a.r||0)/255,d=Number(a.g||0)/255,e=Number(a.b||0)/255,f=Math.max(c,d,e),g=Math.min(c,d,e),h=f-g;return b.v=f,0===b.v?(b.h=0,b.s=0):(b.s=(f-g)/f,0===b.s?b.h=0:(b.h=f===c?(d-e)/h:f===d?2+(e-c)/h:4+(c-d)/h,b.h*=60,b.h<0&&(b.h+=360))),b},c.hsvToRgb=function(a){var b={r:0,g:0,b:0},d=c.clamp(Number(a.h||0),0,360),e=c.clamp(Number(a.s||0)),f=c.clamp(Number(a.v||0)),g=e*f,h=d/60,i=g*(1-Math.abs(h%2-1));1>h?(b.r=g,b.g=i):2>h?(b.r=i,b.g=g):3>h?(b.g=g,b.b=i):4>h?(b.g=i,b.b=g):5>h?(b.r=i,b.b=g):6>=h&&(b.r=g,b.b=i);var j=f-g;return b.r+=j,b.g+=j,b.b+=j,b.r*=255,b.g*=255,b.b*=255,b},c.rgbToHsl=function(a){var b=c.rgbToHsv(a),d={};return d.h=b.h,d.l=(2-b.s)*b.v,d.s=b.s*b.v,d.s/=d.l<=1?d.l:2-d.l,d.l/=2,d},c.hslToRgb=function(a){var b=c.clamp(a.h,0,360),d=c.clamp(a.s),e=c.clamp(a.l),f={};return f.h=b,d*=.5>e?e:1-e,f.s=2*d/(e+d),f.v=e+d,c.hsvToRgb(f)},c.parseCss=function(a){var b={},d=/^#[0-9a-f]{3}$/i,e=a.match(d);if(e)return b={r:17*parseInt(a.charAt(1),16),g:17*parseInt(a.charAt(2),16),b:17*parseInt(a.charAt(3),16)},c.normalize(b);var f=/^#[0-9a-f]{6}$/i,g=a.match(f);if(g)return b={r:parseInt(a.slice(1,3),16),g:parseInt(a.slice(3,5),16),b:parseInt(a.slice(5,7),16)},c.normalize(b);var h=/^rgb\(\s*([0-9]+),\s*([0-9]+),\s*([0-9]+)\s*\)$/i,i=a.match(h);if(i)return b={r:parseInt(i[1],10),g:parseInt(i[2],10),b:parseInt(i[3],10)},c.normalize(b);var j=/^rgba\(\s*([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9\.]+)\s*\)$/i,k=a.match(j);if(k)return b={r:parseInt(k[1],10),g:parseInt(k[2],10),b:parseInt(k[3],10),a:parseFloat(k[4],10)},c.normalize(b);throw new TypeError(a+" is not a valid CSS string for Spectra.")},c.normalize=function(a){a.a=a.a||1;var b=a;return void 0!==b.hsv?(b=c.hsvToRgb(b.hsv),b.a=a.a||1):void 0!==b.hsl?(b=c.hslToRgb(b.hsl),b.a=a.a||1):void 0!==b.css&&(b=c.parseCss(b.css)),b.r=b.red||b.r,b.g=b.green||b.g,b.b=b.blue||b.b,b.a=b.alpha||b.a,b.r=c.clamp(b.r,0,255),b.g=c.clamp(b.g,0,255),b.b=c.clamp(b.b,0,255),b.a=c.clamp(b.a,0,1),b};var Spectra=function(a){return new Spectra.fn(a)};Spectra.fn=function(a){if(null===a||void 0===a)throw new TypeError("Spectra argument must be defined.");return"object"==typeof a?((void 0!==a.r||void 0!==a.red)&&(this.color=c.normalize({r:a.r,g:a.g,b:a.b,a:a.a})),(void 0!==a.v||void 0!==a.value)&&(this.color=c.normalize({hsv:a,a:a.a})),(void 0!==a.l||void 0!==a.lightness)&&(this.color=c.normalize({hsl:a,a:a.a}))):"string"==typeof a&&(this.color=c.normalize({css:a})),this},Spectra.fn.prototype.red=function(a){var b=this.color;return arguments.length?(b.r=a,this.color=c.normalize(b),this):Math.round(b.r)},Spectra.fn.prototype.green=function(a){var b=this.color;return arguments.length?(b.g=a,this.color=c.normalize(b),this):Math.round(b.g)},Spectra.fn.prototype.blue=function(a){var b=this.color;return arguments.length?(b.b=a,this.color=c.normalize(b),this):Math.round(b.b)},Spectra.fn.prototype.hue=function(a){var b=c.rgbToHsv(this.color);return arguments.length?(b.h=a,this.color=c.normalize({hsv:b,a:this.color.a}),this):Math.round(b.h)},Spectra.fn.prototype.saturationv=function(a){var b=c.rgbToHsv(this.color);return arguments.length?(b.s=a,this.color=c.normalize({hsv:b,a:this.color.a}),this):b.s},Spectra.fn.prototype.value=function(a){var b=c.rgbToHsv(this.color);return arguments.length?(b.v=a,this.color=c.normalize({hsv:b,a:this.color.a}),this):b.v},Spectra.fn.prototype.saturation=function(a){var b=c.rgbToHsl(this.color);return arguments.length?(b.s=a,this.color=c.normalize({hsl:b,a:this.color.a}),this):b.s},Spectra.fn.prototype.lightness=function(a){var b=c.rgbToHsl(this.color);return arguments.length?(b.l=a,this.color=c.normalize({hsl:b,a:this.color.a}),this):b.l},Spectra.fn.prototype.alpha=function(a){var b=this.color;return arguments.length?(b.a=a,this):b.a},Spectra.fn.prototype.hex=function(a){if(!arguments.length){var b=this.red(),d=this.green(),e=this.blue(),f=("00"+b.toString(16)).slice(-2),g=("00"+d.toString(16)).slice(-2),h=("00"+e.toString(16)).slice(-2);return"#"+f+g+h}this.color=c.normalize({css:a})},Spectra.fn.prototype.rgba=function(){return"rgba("+this.red()+","+this.green()+","+this.blue()+","+this.alpha()+")"},Spectra.fn.prototype.equals=function(a){var b=this,c=a;return arguments.length<1?b===c:b.red()===c.red()&&b.green()===c.green()&&b.blue()===c.blue()&&b.alpha()===c.alpha()},Spectra.fn.prototype.complement=function(){var a=new Spectra(this.color);return a.hue((a.hue()+180)%360),a},Spectra.fn.prototype.shade_=function(a){var b=new Spectra(this.color);return b.lightness(b.lightness()+a/100),b},Spectra.fn.prototype.lighten=function(a){return this.shade_(a)},Spectra.fn.prototype.darken=function(a){return this.shade_(-a)},Spectra.fn.prototype.saturate=function(a){var b=a/100,c=new Spectra(this.color);return c.saturation(c.saturation()+b),c},Spectra.fn.prototype.desaturate=function(a){var b=a/100,c=new Spectra(this.color);return c.saturation(c.saturation()-b),c},Spectra.fn.prototype.fadeIn=function(a){var b=a/100,c=new Spectra(this.color);return c.alpha(c.alpha()+b),c},Spectra.fn.prototype.fadeOut=function(a){var b=a/100,c=new Spectra(this.color);return c.alpha(c.alpha()-b),c},Spectra.fn.prototype.luma=function(){return.2126*this.red()+.7152*this.green()+.0722*this.blue()},Spectra.fn.prototype.grayscale=function(){return this.desaturate(100)},Spectra.fn.prototype.mix=function(a,b){var c=arguments.length<2?.5:b/100;return new Spectra({r:this.red()*(1-c)+a.red()*c,g:this.green()*(1-c)+a.green()*c,b:this.blue()*(1-c)+a.blue()*c,a:this.alpha()*(1-c)+a.alpha()*c})},Spectra.noConflict=function(){return a.Spectra=b,Spectra},a.Spectra=Spectra}).call(this);